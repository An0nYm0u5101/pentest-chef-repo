{
    "name": "couchdb-ssl",
    "description": "Configure couchdb with SSL. Requires certificate cookbook and data bag",
    "json_class": "Chef::Role",
    "run_list": [
        "recipe[certificate::manage_by_attributes]"
    ],
    "default_attributes": {
        "couch_db": {
            "config": {
                "daemons": {
                    "httpsd": "{couch_httpd, start_link, [https]}"
                },
                "ssl": {
                    "cert_file": "/etc/ssl/couchdb/certs/couchdb.pem",
                    "key_file": "/etc/ssl/couchdb/private/couchdb.key",
                    "password": "pentester",
                    "port": 6984
                }
            }
        },
        "certificate": [{
            "couchdb": {
                "cert_path": "/etc/ssl/couchdb",
                "cert_file": "couchdb.pem",
                "key_file": "couchdb.key",
                "owner": "couchdb",
                "group": "couchdb"
            }
        }]
    }
}
